settings:
  #check-interval: 0.1s
  env:
    PYTHON: python3.6
    TOOL: apiritif
    PREFIX_PATH: /usr/local/taurus-cloud/python/lib
    MOD_DIR: ${PREFIX_PATH}/${PYTHON}/site-packages/bzt/modules
    FILE_NAME: executor.py

execution:
- executor: ${TOOL}
  iterations: 10
  scenario: scr
  files:
  - bzt/modules/${TOOL}/${FILE_NAME}

scenarios:
  scr:
    think-time: 1s
    requests:
    - http://blazedemo.com/
    #- https://gettaurus.org/

~services:
- module: shellexec
  prepare:
    - echo
    - cp /tmp/artifacts/${FILE_NAME} ${MOD_DIR}/${TOOL} # turned off for local debug



#    - 'echo -e "_D_ BEFORE: \n" && ls -l ${MOD_DIR}/${TOOL}.py* || true'
#    - rm ${MOD_DIR}/${TOOL}.py*
#    - 'echo -e "_D_ REMOVED: \n" && ls -l ${MOD_DIR}/${TOOL}.py* || true'
#    - 'echo -e "_D_ REPLACED: \n" && ls -l ${MOD_DIR}/${TOOL}.py* || true'

modules:
  cloud:
    token: b4c1249391c6aeff5915f3f0:225d42460fa51edf554c2822671e9aab3c524613ad7731f6a96d74f5484282ca859f5470 #0
    #check-interval: 0.01s
    projects: deb
    test: one